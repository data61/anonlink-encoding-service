debug: false

app:
  image:
    repository: "quay.io/n1analytics/encoding-service"
    tag: "latest"

  replicas: 1
  resources:
    #limits:
    #  memory: 512Mi
    #  cpu: 4
    requests:
      cpu: 200m
      memory: 256Mi

  #podAnnotations:

service:
  ## For minikube, set this to NodePort, elsewhere use LoadBalancer
  ## Use ClusterIP if your setup includes an ingress controller.
  type: "ClusterIP"
  port: "80"

  ## Set the LoadBalancer service type to internal only.
  ## ref: https://kubernetes.io/docs/concepts/services-networking/service/#internal-load-balancer
  # loadBalancerIP:

ingress:
  ## Set to true to enable ingress record generation
  enabled: false

  ## The list of hostnames to be covered with this ingress record.
  ## Most likely this will be just one host, but in the event more hosts are needed, this is an array
  hosts:
  - name: encodingservice.data61.xyz

    ## Set this to true in order to enable TLS on the ingress record
    ## A side effect of this will be that the backend drupal service will be connected at port 443
    tls: true

    ## Set this to true in order to add the corresponding annotations for cert-manager
    certManager: false

    ## If TLS is set to true, you must declare what secret will store the key/certificate for TLS
    tlsSecret: encodingservice-tls

    ## Ingress annotations done as key:value pairs
    ## For a full list of possible ingress annotations, please see
    ## ref: https://github.com/kubernetes/ingress-nginx/blob/master/docs/annotations.md
    ##
    ## If certManager is set to true, annotation kubernetes.io/tls-acme: "true" will automatically be set
    annotations:
      #  kubernetes.io/ingress.class: nginx
      # certmanager.k8s.io/cluster-issuer: letsencrypt-cluster-issuer
      ## To handle large uploads we might increase the nginx buffer size
      #ingress.kubernetes.io/proxy-body-size: 1024m
      #nginx.ingress.kubernetes.io/proxy-body-size: 1024m


workers:
  image:
    repository: "quay.io/n1analytics/encoding-service"
    tag: "latest"

  replicas: 2
  resources:
    #limits:
    #  memory: 512Mi
    #  cpu: 4
    requests:
      cpu: 200m
      memory: 256Mi


provision:
  postgresql: true

jobs:
  initdb:
    enabled: true
    image:
      repository: "quay.io/n1analytics/encoding-service"
      tag: "latest"


postgresql:
  # See available settings and defaults at:
  # https://github.com/kubernetes/charts/tree/master/stable/postgresql
  nameOverride: "postgres"
  postgresPassword: "secret"
  persistence:
    enabled: false
    storageClass: "default"
    size: 8Gi
  imageTag: "9.6.2"
  imagePullPolicy: IfNotPresent
  metrics:
    enabled: true
  resources:
    #limits:
    #  memory: 8Gi
    requests:
      #memory: 1Gi
      cpu: 100m
